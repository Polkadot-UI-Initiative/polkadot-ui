---
title: Require Connection
description: A component that conditionally renders content based on blockchain connection status.
---

import { RequireConnectionWithProvider } from "@/registry/dot-ui/blocks/require-connection/components/require-connection.papi";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs"
import { AlertCircle, Wifi, WifiOff, Loader2 } from "lucide-react";

## Introduction

RequireConnection is a component that conditionally renders content based on blockchain connection status, ensuring that protected UI components only display when connected to the required chain.

## Features

- ‚úÖ **Connection Validation**: Checks connection status for specific blockchain networks
- ‚úÖ **Loading States**: Optional loading indicators during connection establishment
- ‚úÖ **Flexible Fallbacks**: Customizable content for disconnected states
- ‚úÖ **Chain-Specific**: Works with any configured chain ID
- ‚úÖ **TypeScript**: Full type safety with comprehensive interfaces
- ‚úÖ **Provider Agnostic**: Works with both dedot and polkadot-api (PAPI) providers

## Installation

```bash
npx polkadot-ui@latest add require-connection
```

## Usage

### Basic Example

<Tabs defaultValue="preview" className="max-w-[600px]">
  <TabsList>
    <TabsTrigger value="preview">Preview</TabsTrigger>
    <TabsTrigger value="code">Code</TabsTrigger>
  </TabsList>
  <TabsContent value="preview">
    <RequireConnectionWithProvider
      chainId="paseo"
      fallback={
        <div className="flex items-center gap-2 text-muted-foreground">
          <WifiOff className="w-4 h-4" />
          <span>Please connect to Paseo to continue</span>
        </div>
      }
    >
      <div className="flex items-center gap-2 text-green-600">
        <Wifi className="w-4 h-4" />
        <span>üéâ Connected to Paseo! This content is now visible.</span>
      </div>
    </RequireConnectionWithProvider>
  </TabsContent>
  <TabsContent value="code" className="my-0">
```tsx
import { RequireConnection } from "@/components/ui/require-connection";

function MyComponent() {
  return (
    <RequireConnection
      chainId="paseo"
      fallback={<div>Please connect to Paseo to continue</div>}
    >
      <div>üéâ Connected to Paseo! This content is now visible.</div>
    </RequireConnection>
  );
}
```
</TabsContent>
</Tabs>

### With Loading State

<Tabs defaultValue="preview" className="max-w-[600px]">
  <TabsList>
    <TabsTrigger value="preview">Preview</TabsTrigger>
    <TabsTrigger value="code">Code</TabsTrigger>
  </TabsList>
  <TabsContent value="preview">
    <RequireConnectionWithProvider
      chainId="paseo_people"
      loadingFallback={
        <div className="flex items-center gap-2 text-blue-600">
          <Loader2 className="w-4 h-4 animate-spin" />
          <span>Connecting to Paseo People...</span>
        </div>
      }
      fallback={
        <div className="flex items-center gap-2 text-muted-foreground">
          <WifiOff className="w-4 h-4" />
          <span>Failed to connect to Paseo People</span>
        </div>
      }
    >
      <div className="flex items-center gap-2 text-green-600">
        <Wifi className="w-4 h-4" />
        <span>Connected to Paseo People</span>
      </div>
    </RequireConnectionWithProvider>
  </TabsContent>
  <TabsContent value="code" className="my-0">
```tsx
<RequireConnection
  chainId="paseo_people"
  loadingFallback={<div>Connecting to Paseo People...</div>}
  fallback={<div>Failed to connect to Paseo People</div>}
>
  <PeopleChainFeatures />
</RequireConnection>
```
</TabsContent>
</Tabs>

### Protecting Transaction UI

<Tabs defaultValue="preview" className="max-w-[600px]">
  <TabsList>
    <TabsTrigger value="preview">Preview</TabsTrigger>
    <TabsTrigger value="code">Code</TabsTrigger>
  </TabsList>
  <TabsContent value="preview">
    <RequireConnectionWithProvider
      chainId="paseo"
      fallback={
        <div className="flex items-center gap-2 text-muted-foreground">
          <WifiOff className="w-4 h-4" />
          <span>Please connect to Paseo to submit transactions</span>
        </div>
      }
    >
      <div className="border rounded-lg p-4">
        <h3 className="font-medium mb-2">Transaction Form</h3>
        <p className="text-sm text-muted-foreground">
          Transaction interface is available when connected.
        </p>
      </div>
    </RequireConnectionWithProvider>
  </TabsContent>
  <TabsContent value="code" className="my-0">
```tsx
<RequireConnection
  chainId="paseo"
  fallback={
    <div className="flex items-center gap-2 text-muted-foreground">
      <WifiOff className="w-4 h-4" />
      <span>Please connect to Paseo to submit transactions</span>
    </div>
  }
>
  <TransactionForm />
</RequireConnection>
```
</TabsContent>
</Tabs>

## Props

| Prop | Type | Required | Description |
|------|------|----------|-------------|
| `chainId` | `ChainId` | ‚úÖ | The chain ID that must be connected |
| `children` | `ReactNode` | ‚úÖ | Content to render when connected |
| `fallback` | `ReactNode` | ‚úÖ | Content to render when not connected |
| `loadingFallback` | `ReactNode` | ‚ùå | Optional content to show while connecting |

## Connection States

The component handles three distinct states:

1. **Loading**: Connection is being established (shows `loadingFallback` if provided)
2. **Connected**: Chain is connected (shows `children`)
3. **Disconnected**: Chain is not connected (shows `fallback`)

## Supported Chain IDs

The component works with any chain ID configured in your dot-ui config:

- `"paseo"` - Paseo Relay Chain
- `"paseo_people"` - Paseo People Chain
- Any custom chains you've added to your configuration

## Use Cases

### Multi-Chain Support

```tsx
function MultiChainComponent() {
  return (
    <div className="space-y-6">
      <RequireConnection
        chainId="paseo"
        fallback={<ConnectMessage chain="paseo" />}
      >
        <RelayChainFeatures />
      </RequireConnection>

      <RequireConnection
        chainId="paseo_people"
        fallback={<ConnectMessage chain="paseo_people" />}
      >
        <PeopleChainFeatures />
      </RequireConnection>
    </div>
  );
}
```

### Dashboard Sections

```tsx
<RequireConnection
  chainId="paseo"
  loadingFallback={<DashboardSkeleton />}
  fallback={<ConnectPrompt />}
>
  <ChainDashboard />
</RequireConnection>
```

### Nested Protection

```tsx
<RequireConnection chainId="paseo" fallback={<ConnectRelay />}>
  <RequireConnection chainId="paseo_people" fallback={<ConnectPeople />}>
    <CrossChainFeature />
  </RequireConnection>
</RequireConnection>
```

## Best Practices

### 1. Graceful Fallbacks

Always provide meaningful fallback content that explains why the connection is required:

```tsx
<RequireConnection
  chainId="paseo"
  fallback={
    <div className="text-center p-6">
      <h3>Paseo Connection Required</h3>
      <p>This feature needs access to the Paseo blockchain.</p>
    </div>
  }
>
  <ChainFeature />
</RequireConnection>
```

### 2. Loading States

For better UX, provide loading states for slow connections:

```tsx
<RequireConnection
  chainId="paseo"
  loadingFallback={<Spinner>Connecting to Paseo...</Spinner>}
  fallback={<ConnectionError />}
>
  <Content />
</RequireConnection>
```

### 3. Informative Error Messages

Use descriptive error messages to help users understand what's needed:

```tsx
<RequireConnection
  chainId="paseo"
  fallback={
    <Alert>
      <AlertCircle className="h-4 w-4" />
      <AlertTitle>Paseo Connection Required</AlertTitle>
      <AlertDescription>
        This blockchain interface requires a connection to the Paseo network.
        Please ensure your provider is configured correctly.
      </AlertDescription>
    </Alert>
  }
>
  <BlockchainInterface />
</RequireConnection>
```

## Examples

<RequireConnectionWithProvider
  chainId="paseo"
  fallback={
    <div className="flex items-center gap-2 text-muted-foreground">
      <WifiOff className="w-4 h-4" />
      <span>Connect to Paseo to view this example</span>
    </div>
  }
>
  <div className="flex items-center gap-2 text-green-600">
    <Wifi className="w-4 h-4" />
    <span>This content is protected by RequireConnection</span>
  </div>
</RequireConnectionWithProvider>